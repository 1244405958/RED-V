# 开发环境



## SiFive 资源介绍

### Freedom E SDK

The Freedom E SDK is a repository of demo programs, industry standard benchmarks, and board support packages (BSPs) for our hardware platforms. Running benchmark code on our development boards is as easy as building a single Makefile target.

```shell
git clone --recursive https://github.com/sifive/freedom-e-sdk.git
```

取并检出任何嵌套的子模块。



### Freedom Studio

Freedom Studio 是 SiFive 公司推出的一个集成开发环境，用来编写和调试基于 SiFive 处理器的软件。内嵌了编译好的 RISC-V GCC 工具链、OpenOCD、以及一些示例和文档。

Freedom Studio is the fastest way to get started programming with your SiFive hardware. Freedom Studio is built on top of the popular Eclipse IDE and packaged with a prebuilt toolchain and example projects from the Freedom E SDK. Freedom Studio is compatible with all SiFive RISC-V development boards.

We highly recommend downloading and reviewing the [Freedom Studio User Manual](https://static.dev.sifive.com/dev-tools/FreedomStudio/2020.06/freedom-studio-manual-4.7.2-2020-06-0.pdf) before downloading and installing Freedom Studio. This manual has important information about preparing your host system to help you get up and running as quickly as possible. Please note that the Freedom Studio IDE no longer runs on CentOS 6.

![](./images/Download_Freedom_Studio.png)



### Prebuilt RISC‑V GCC Toolchain and Emulator

Save time by using one of our prebuilt toolchains which contain all the tools necessary to compile and debug programs on SiFive products. No hardware, no problem as the QEMU emulator packages can be used to test software applications without hardware. Our toolchain and emulator distributions have been carefully packaged to support both 32-bit & 64-bit ISAs. All the available packages are built using our [Freedom Tools](https://github.com/sifive/freedom-tools/releases) GitHub repository.

- GNU Embedded Toolchain
- OpenOCD
- QEMU
- Spike Disassembler



### Freedom U SDK

The Freedom U SDK is a repository containing everything needed to build a Linux-based board support packages (BSP) targeting SiFive hardware and emulation platforms.

```shell
git clone https://github.com/sifive/freedom-u-sdk.git
```



### Pre-Built Linux BSP

Already have a HiFive Unleashed and want to get started right away? Download the latest pre-built image below and follow the instructions in [Freedom U SDK](https://github.com/sifive/freedom-u-sdk) for writing the image to the Micro SD Card.



### Third Party RISC‑V Tools

A vibrant third-party ecosystem has evolved around the free and open RISC‑V ISA. The following tools are not developed nor maintained by SiFive, but may be worth considering for your next project.

#### Ashling

[Ashling](https://www.ashling.com/) is a world-class technology partner offering integrated solutions, tools, and design services that are at the heart of the embedded environment. Ashling RiscFree™ C/C++ for RISC-V, is a fully integrated development tool environment that includes an IDE, compiler, debugger, and Opella-XD JTAG probe ready to use with SiFive’s RISC-V Core IP products. A single download and install provides out of the box functionality and support for SiFive IP cores. Ashling brings in the added value of offering tools customization of any ISA extension, for both compiler and debugger, to support SiFive’s customer base.



- [Ashling RiscFree™ C/C++ for RISC-V](https://www.ashling.com/sifive)
- [Ashling Tools Customization Services](https://www.ashling.com/services-taas)
- [Ashling Multi-core (Heterogeneous) Debug](https://www.ashling.com/multi-core)

#### GNU MCU Eclipse

[GNU MCU Eclipse](https://gnu-mcu-eclipse.github.io/) is an open source project that includes a family of Eclipse plug-ins and tools for multi-platform embedded development, based on GNU toolchains. The RISC‑V architecture is fully supported, and the Eclipse plug‑ins allow users to create and build C/C++ projects. The debugging plug-ins support SEGGER J‑Link, OpenOCD, and QEMU—and include a detailed peripheral register viewer.

- [GNU MCU Eclipse IDE for C/C++ Developers](https://github.com/gnu-mcu-eclipse/org.eclipse.epp.packages/releases)
- [GNU MCU Eclipse RISC-V Embedded GCC](https://github.com/gnu-mcu-eclipse/riscv-none-gcc/releases)
- [GNU MCU Eclipse OpenOCD](https://github.com/gnu-mcu-eclipse/openocd/releases)

#### IAR Systems

[IAR Systems](https://www.iar.com/) is a truly global company at the top of our industry, providing world-leading software for building embedded applications for more than 30 years. We supply the tools and services that make embedded systems development fast, efficient and reliable, enabling our customers worldwide to deliver better products to their markets faster. IAR Embedded Workbench for RISC-V offers excellent optimization technology to ensure developers that the application fits the required needs and optimizes the utilization of on-board memory and necessary speed.

- [IAR Embedded Workbench for RISC-V](https://www.iar.com/iar-embedded-workbench/#!?architecture=RISC-V)

#### Lauterbach

The TRACE32® user interface and base modules support most available processor architectures. TRACE32® tools are applied in the pre-silicon phase for virtual prototyping and provide a seamless transition throughout all subsequent development phases leading to mass production. In October 2017, Lauterbach and SiFive [announced](http://www.lauterbach.com/news_446.html) TRACE32® support for RISC‑V cores.

- [TRACE32® debugger for RISC-V](http://www.lauterbach.com/bdmriscv.html)

#### PlatformIO

[PlatformIO](https://platformio.org/) is a unique, open source, cross-platform and hardware-agnostic solution that provides developers with a modern integrated development environment that includes advanced embedded instruments for debugging, unit testing, and remote management. Thanks to its flexible architecture it can be easily customized to support any RISC-V core and platform-specific SDK reducing the time required to ship your RISC-V solution to the market.

- [PlatformIO IDE](https://platformio.org/platformio-ide)
- [SiFive development platform: examples, configuration, supported boards](https://docs.platformio.org/en/latest/platforms/sifive.html)

#### SEGGER

[SEGGER Microcontroller](https://www.segger.com/) is a supplier of software, hardware, and development tools for embedded systems. SEGGER offers support throughout the development process with easy-to-use tools and middleware components.

- [Embedded Studio](https://www.segger.com/products/development-tools/embedded-studio/editions/risc-v/) - The leading cross-platform IDE for embedded C/C++ development. Available for Windows, macOS, and Linux.
- [J-Link](https://www.segger.com/products/debug-probes/j-link/) - With unparalleled performance and an extensive feature set, J-Link offers the world’s most widely-used debug probes.



## Hello World！

RED-V 使用很简单，它只需要一根 Type-C 的 USB 线就可以开始工作。软件开发需要用到 Freedom Studio IDE，可以在 SiFive 官网下载。如果下载 Windows 版本的话，只要解压就可以直接使用，无需在安装。不过记得解压目录不能有中文和空格。

打开 FreedomStudio 软件，IDE 界面窗口包括工程目录窗口，控制台窗口，debug 窗口，输出信息窗口例如串口信息，变量及 memory 信息串口，文件编辑窗口等等，这里不多啰嗦了。

**如何点亮板卡？**

我们来试试输出一个“Hello World！”。

首先新建工程要选择 Freedom E SDK project：

![](./images/freedom-studio_hello_01.png)

target project 选择 sifive-hifive1-revb，example 例程里选择 hello，

![](./images/freedom-studio_hello_02.png)

![](./images/freedom-studio_hello_03.png)

Jlink 下载，然后创建工程。

把开发板连上电脑后，打开设备管理器可以看到识别了两个虚拟串口，而且也识别了一个 hifive 名称的 U 盘。

<img src="./images/freedom-studio_hello_04.png" style="zoom:50%;" />

工程创建完成后先进行编译。编译完成生产了 elf 和 hex 文件，首先可以进行 debug，比如右键点击 elf 文件选择 debug。

![](./images/freedom-studio_hello_05.png)

进入 debug 状态后，可以单步运行调试。在右下窗口可以打开串口监视窗口，运行后打印“hello world”。

![](./images/freedom-studio_hello_06.png)

我们也可以尝试修改主程序控制用户 LED 闪烁，编译运行后生成 elf 和 hex 文件。这里其实既可以 debug 调试，也可以直接拷贝 hex 文件到 U 盘，完成后程序就烧录进去了，非常方便。

![](./images/freedom-studio_hello_07.png)

总的来说 RED-V 是一款性价比很高的开发板，下载调试非常方便，兼容 Arduino 接口可玩性也很高。虽然 FreedomStudio 的软件使用还是比较复杂，上手需要花点功夫（目前在 Linux 系统下已有支持 Arduino IDE 的版本），但想快速 DIY 一些有趣项目还是不错的。

所以我们看到，从 SoC 到开发板整体设计来说都是非常简洁，没有过多的花样，对于想了解和学习这个极具前景的开源 CPU 架构来说，RED-V 颇具性价比，非常适合作为学习 RISC-V 架构处理器的入门开发板。



## Hello RISC-V

```c
/* Copyright 2019 SiFive, Inc */
/* SPDX-License-Identifier: Apache-2.0 */

#include <stdio.h>

int main() {
    printf("\n\n");
    printf("         5555555555555555555555555\n");
    printf("        5555                   5555\n");
    printf("       5555                     5555\n");
    printf("      5555                       5555\n");
    printf("     5555       5555555555555555555555\n");
    printf("    5555       555555555555555555555555\n");
    printf("   5555                             5555\n");
    printf("  5555                               5555\n");
    printf(" 5555                                 5555\n");
    printf("5555555555555555555555555555          55555\n");
    printf("  55555          555555555           55555\n");
    printf("    55555          55555           55555\n");
    printf("      55555          5           55555\n");
    printf("        55555                  55555\n");
    printf("          55555              55555\n");
    printf("            55555          55555\n");
    printf("             55555       55555\n");
    printf("               55555   55555\n");
    printf("                 555555555\n");
    printf("                   55555\n");
    printf("                     5\n\n");

    printf("               Hello, RISC-V!\n");
}
```

